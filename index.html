<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabre Advanced Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body class="dashboard-body">

    <nav id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <a href="#" class="logo">SABRE <i class="fas fa-shield-alt"></i></a>
            <button id="sidebar-toggle" class="sidebar-toggle-btn" aria-label="Toggle Sidebar">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <ul class="nav-list">
            <li class="nav-item active" data-view="screens">
                <a href="#"><i class="fas fa-desktop"></i><span>Screens</span></a>
            </li>
            <li class="nav-item" data-view="timeline">
                <a href="#"><i class="fas fa-stream"></i><span>Timeline</span></a>
            </li>
            <li class="nav-item" data-view="students">
                <a href="#"><i class="fas fa-users"></i><span>Students</span></a>
            </li>
            <li class="nav-item" data-view="settings">
                <a href="#"><i class="fas fa-sliders-h"></i><span>Filters & Settings</span></a>
            </li>
            <li class="nav-item" data-view="reports">
                <a href="#"><i class="fas fa-chart-bar"></i><span>Reports</span></a>
            </li>
        </ul>
        <div class="sidebar-footer">
            <div id="connection-status" class="status-indicator disconnected">
                <span class="dot"></span>
                <span class="text">Disconnected</span>
            </div>
            <div class="user-profile">
                <i class="fas fa-user-circle"></i>
                <span class="username">Teacher Name</span>
            </div>
        </div>
    </nav>

    <main id="main-content">
        <header class="main-header">
            <div class="header-left">
                <h2 id="view-title">Screens</h2>
                <div id="session-info">
                    <span class="session-status">No Active Session</span>
                    <button id="start-session-btn" class="btn btn-success btn-sm"><i class="fas fa-play"></i> Start Session</button>
                    <button id="end-session-btn" class="btn btn-danger btn-sm hidden"><i class="fas fa-stop"></i> End Session</button>
                </div>
            </div>
            <div class="header-right">
                <button class="btn btn-icon" title="Notifications"><i class="fas fa-bell"></i></button>
                <button class="btn btn-icon" title="Help"><i class="fas fa-question-circle"></i></button>
            </div>
        </header>

        <div class="views-container">

            <div id="screens-view" class="view active">
                <div class="view-toolbar">
                    <div class="toolbar-section">
                        <input type="checkbox" id="select-all-students" class="checkbox-input">
                        <label for="select-all-students">Select All</label>
                        <span id="selected-count">(0 Selected)</span>
                    </div>
                    <div class="toolbar-section actions">
                        <button id="lock-selected" class="btn btn-secondary btn-sm" title="Lock Selected"><i class="fas fa-lock"></i> Lock</button>
                        <button id="unlock-selected" class="btn btn-secondary btn-sm" title="Unlock Selected"><i class="fas fa-unlock"></i> Unlock</button>
                        <button id="open-tab-selected" class="btn btn-secondary btn-sm" title="Open Tab for Selected"><i class="fas fa-external-link-alt"></i> Open Tab</button>
                        <button id="close-tab-selected" class="btn btn-secondary btn-sm" title="Close Active Tab for Selected"><i class="fas fa-times-circle"></i> Close Tab</button>
                        <button id="announce-selected" class="btn btn-secondary btn-sm" title="Send Announcement"><i class="fas fa-bullhorn"></i> Announce</button>
                        <button id="block-site-selected" class="btn btn-secondary btn-sm" title="Apply Blocklist"><i class="fas fa-ban"></i> Block Site</button>
                         <button id="focus-selected" class="btn btn-secondary btn-sm" title="Focus Selected on URL"><i class="fas fa-crosshairs"></i> Focus</button>
                    </div>
                    <div class="toolbar-section view-options">
                        <input type="search" id="student-search" placeholder="Search Students..." class="control-input input-sm">
                        <select id="sort-students" class="control-select select-sm">
                            <option value="name">Sort by Name</option>
                            <option value="status">Sort by Status</option>
                            <option value="activity">Sort by Activity</option>
                        </select>
                         <button id="layout-toggle" class="btn btn-icon btn-sm" title="Toggle Layout"><i class="fas fa-th-large"></i></button>
                    </div>
                </div>
                <div id="student-grid" class="student-grid">
                    <div class="placeholder-message" id="loading-placeholder">Loading students...</div>
                    <div class="placeholder-message hidden" id="no-students-placeholder">No students connected.</div>
                </div>
            </div>

            <div id="timeline-view" class="view">
                 <h2>Activity Timeline</h2>
                 <p>View a chronological feed of student activity (Placeholder).</p>
                 </div>
             <div id="students-view" class="view">
                 <h2>Manage Students</h2>
                 <p>View student roster, groups, and details (Placeholder).</p>
                 </div>
            <div id="settings-view" class="view">
                 <h2>Filters & Settings</h2>
                 <p>Configure website filters, session settings, and advanced options (Placeholder).</p>
                 <div class="settings-form">
                    <label for="default-blocklist">Default Blocklist (one pattern per line):</label>
                    <textarea id="default-blocklist" rows="5" placeholder="*://*.example.com/*"></textarea>
                    <button class="btn btn-primary">Save Blocklist</button>
                 </div>
            </div>
            <div id="reports-view" class="view">
                 <h2>Reports</h2>
                 <p>View session summaries and student activity reports (Placeholder).</p>
                 </div>

        </div> </main> <div id="open-tab-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal-btn" data-modal-id="open-tab-modal">&times;</span>
            <h3>Open Tab for Selected Students</h3>
            <label for="open-tab-url">Enter URL:</label>
            <input type="url" id="open-tab-url" placeholder="https://example.com" required>
            <button id="confirm-open-tab" class="btn btn-primary">Open Tab</button>
        </div>
    </div>

     <div id="announce-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal-btn" data-modal-id="announce-modal">&times;</span>
            <h3>Send Announcement</h3>
            <label for="announce-message">Message:</label>
            <textarea id="announce-message" rows="3" required></textarea>
             <label for="announce-duration">Duration (seconds):</label>
             <input type="number" id="announce-duration" value="10" min="1">
            <button id="confirm-announce" class="btn btn-primary">Send</button>
        </div>
    </div>

     <div id="student-detail-modal" class="modal modal-large hidden">
         <div class="modal-content">
              <span class="close-modal-btn" data-modal-id="student-detail-modal">&times;</span>
              <h3 id="detail-student-name">Student Detail</h3>
              <div class="student-detail-layout">
                   <div class="detail-screen-view">
                        <img id="detail-screenshot" src="placeholder.png" alt="Student Screen">
                        <div class="detail-screen-controls">
                             <button class="btn btn-sm btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
                             <button class="btn btn-sm btn-warning"><i class="fas fa-eye"></i> Live View</button>
                        </div>
                   </div>
                   <div class="detail-info-panel">
                        <h4>Active Tab</h4>
                        <p id="detail-active-tab">Loading...</p>
                        <h4>Open Tabs</h4>
                        <ul id="detail-tab-list"><li>Loading...</li></ul>
                        <h4>Recent Activity</h4>
                        <ul id="detail-activity-log"><li>Loading...</li></ul>
                        <div class="detail-actions">
                            <button class="btn btn-secondary"><i class="fas fa-lock"></i> Lock</button>
                            <button class="btn btn-secondary"><i class="fas fa-comment-dots"></i> Message</button>
                            <button class="btn btn-danger"><i class="fas fa-power-off"></i> Close Browser</button>
                        </div>
                   </div>
              </div>
         </div>
     </div>


    <template id="student-card-template">
        <div class="student-card" data-client-id="">
            <div class="card-header">
                <input type="checkbox" class="student-select checkbox-input">
                <span class="status-dot"></span>
                <span class="student-name">Student Name</span>
                <div class="card-menu">
                    <button class="btn btn-icon btn-sm card-action-btn" title="More actions"><i class="fas fa-ellipsis-v"></i></button>
                     </div>
            </div>
            <div class="screenshot-container" title="Click to view details">
                <img src="placeholder.png" alt="Screenshot" class="screenshot-img">
                <div class="no-screenshot-overlay hidden">No Screenshot</div>
                <div class="last-updated">Never</div>
                 <div class="card-lock-overlay hidden"><i class="fas fa-lock"></i> Locked</div>
            </div>
            <div class="card-footer">
                <img src="favicon.png" alt="favicon" class="favicon">
                <span class="tab-title" title="Tab URL">No active tab</span>
                <button class="btn btn-icon btn-sm card-action-btn close-tab-btn" title="Close Active Tab"><i class="fas fa-times"></i></button>
            </div>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>
